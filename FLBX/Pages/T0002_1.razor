@implements Microsoft.AspNetCore.Components.IComponent
@using Syncfusion.Blazor.Grids


<SfGrid ID="Grid" @ref="Grid" DataSource="@GridDataLot" AllowSelection="true" AllowSorting="true" Height="600" RowHeight="30" AllowExcelExport="true" AllowPdfExport="true" AllowPaging="true" Toolbar="@(new List<string>() { "Add", "Edit", "Delete", "Update", "Cancel", "ExcelExport", "CsvExport", "PdfExport"})">
    <GridEvents OnToolbarClick="ToolbarClick" TValue="Lot"></GridEvents>
    <GridSelectionSettings CheckboxOnly="true" PersistSelection="true"></GridSelectionSettings>
    <GridPageSettings PageCount="5" PageSizes="true"></GridPageSettings>
    <GridColumns>
        <GridColumn Type="ColumnType.CheckBox" Width="50"></GridColumn>
        <GridColumn Field=@nameof(Lot.Id) IsPrimaryKey="true" HeaderText="LotId" Width="50"></GridColumn>
        <GridColumn Field=@nameof(Lot.Name) HeaderText="이름" TextAlign="TextAlign.Right" Width="50"></GridColumn>
        <GridColumn Field=@nameof(Lot.Qty) HeaderText="수량" Width="50"></GridColumn>
        <GridColumn Field=@nameof(Lot.Segment) HeaderText="공정" Width="80"></GridColumn>
        <GridColumn Field=@nameof(Lot.Equitment) HeaderText="설비" Width="80"></GridColumn>
    </GridColumns>
</SfGrid>
@code {
    void Attach(RenderHandle renderHandle) { }

    public List<WorkOrderDetails> GridData { get; set; }
    public List<Lot> GridDataLot { get; set; }

    SfGrid<Lot> Grid;

    protected override void OnInitialized()
    {
        GridData = WorkOrderDetails.GetAllRecords();
        GridDataLot = Lot.GetAllRecords();
    }

    public void ToolbarClick(Syncfusion.Blazor.Navigations.ClickEventArgs args)
    {
        if (args.Item.Id == "Grid_pdfexport")
        {
            this.Grid.PdfExport();
        }
        if (args.Item.Id == "Grid_excelexport")
        {
            this.Grid.ExcelExport();
        }
        if (args.Item.Id == "Grid_csvexport")
        {
            this.Grid.CsvExport();
        }
    }
}